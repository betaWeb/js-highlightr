!function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){const i=r(2);String.prototype.highlight||(String.prototype.highlight=function(t,e={}){return new i(e).highlight(this,t)}),Array.prototype.highlight||(Array.prototype.highlight=function(t,e={}){return new i(e).highlightMany(this,t)}),Node.prototype.highlight||(Node.prototype.highlight=function(t,e={}){const r=new i(e);return this.innerHTML=r.highlight(this.innerText,t),this})},function(t,e,r){const i=r(3);t.exports=i},function(t,e){t.exports=class{constructor(t={}){this.setOptions(t)}highlight(t,e){return t&&t.length?e&&e.length?this._highlight(t,e):t:""}highlightMany(t,e){if(!t||!Array.isArray(t))throw new Error("Highlight::highlightMany - contextArray parameter must be of type array");return t.reduce((t,r)=>(t.push(this.highlight(r,e)),t),[])}setOptions(t={}){this._params={html_attrs:{},html_tag:"span",css_classes:"search__highlight",regexp:"__exp__",regexp_flags:"gi",word_min_length:2,...t}}_prepare(t){const e=t;return(t=t.constructor===String?t.split(" "):t).unshift(e),t.filter((t,e,r)=>r.indexOf(t)===e).filter(t=>t.length>this._params.word_min_length).map(t=>t.trim()).join("|")}_highlight(t,e){return(e=this._prepare(e)).length?t.replace(this._buildRegExp(e),t=>this._buildTemplate(t)):t}_belongsToContext(t,e){return new RegExp(t,"gi").test(e)}_buildRegExp(t){return new RegExp(this._params.regexp.replace("__exp__",t),this._params.regexp_flags)}_buildTemplate(t){return`<${this._params.html_tag} class="${this._params.css_classes}" ${this._buildAttrs()} js-highlightr>${t}</${this._params.html_tag}>`}_buildAttrs(){if(!Object.keys(this._params.html_attrs).length)return" ";let t=[""];for(let e in this._params.html_attrs)this._params.html_attrs.hasOwnProperty(e)&&t.push(`${e}="${this._params.html_attrs[e]}"`);return t.join(" ")}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJIaWdobGlnaHQiLCJTdHJpbmciLCJoaWdobGlnaHQiLCJzZWFyY2hhYmxlIiwib3B0aW9ucyIsInRoaXMiLCJBcnJheSIsImhpZ2hsaWdodE1hbnkiLCJOb2RlIiwiX2luc3RhbmNlIiwiaW5uZXJIVE1MIiwiaW5uZXJUZXh0IiwiSGlnaGxpZ2h0ZXIiLCJbb2JqZWN0IE9iamVjdF0iLCJzZXRPcHRpb25zIiwiY29udGV4dCIsImxlbmd0aCIsIl9oaWdobGlnaHQiLCJjb250ZXh0QXJyYXkiLCJpc0FycmF5IiwiRXJyb3IiLCJyZWR1Y2UiLCJhY2MiLCJwdXNoIiwiX3BhcmFtcyIsImh0bWxfYXR0cnMiLCJodG1sX3RhZyIsImNzc19jbGFzc2VzIiwicmVnZXhwIiwicmVnZXhwX2ZsYWdzIiwid29yZF9taW5fbGVuZ3RoIiwiaW5pdGlhbF92YWx1ZSIsImNvbnN0cnVjdG9yIiwic3BsaXQiLCJ1bnNoaWZ0IiwiZmlsdGVyIiwidiIsImluZGV4T2YiLCJtYXAiLCJ0cmltIiwiam9pbiIsIl9wcmVwYXJlIiwicmVwbGFjZSIsIl9idWlsZFJlZ0V4cCIsIm1hdGNoIiwiX2J1aWxkVGVtcGxhdGUiLCJSZWdFeHAiLCJ0ZXN0Iiwid29yZCIsIl9idWlsZEF0dHJzIiwia2V5cyIsIl9hdHRycyJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBckIs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UUFBQW5GLEtBQUFxQyxLQUFBbUIsUUFBQUMsV0FDQXBCLEtBQUFtQixRQUFBQyxXQUFBNUIsZUFBQTdCLElBQ0FtRixFQUFBNUIsUUFBK0J2RCxNQUFNcUMsS0FBQW1CLFFBQUFDLFdBQUF6RCxPQUdyQyxPQUFBbUYsRUFBQVgsS0FBQSIsImZpbGUiOiJoaWdobGlnaHRyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImNvbnN0IEhpZ2hsaWdodCA9IHJlcXVpcmUoJy4vaW5kZXgnKVxuXG5pZiAoIVN0cmluZy5wcm90b3R5cGUuaGlnaGxpZ2h0KSB7XG4gICAgU3RyaW5nLnByb3RvdHlwZS5oaWdobGlnaHQgPSBmdW5jdGlvbiAoc2VhcmNoYWJsZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IF9pbnN0YW5jZSA9IG5ldyBIaWdobGlnaHQob3B0aW9ucylcbiAgICAgICAgcmV0dXJuIF9pbnN0YW5jZS5oaWdobGlnaHQodGhpcywgc2VhcmNoYWJsZSlcbiAgICB9XG59XG5cbmlmICghQXJyYXkucHJvdG90eXBlLmhpZ2hsaWdodCkge1xuICAgIEFycmF5LnByb3RvdHlwZS5oaWdobGlnaHQgPSBmdW5jdGlvbiAoc2VhcmNoYWJsZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IF9pbnN0YW5jZSA9IG5ldyBIaWdobGlnaHQob3B0aW9ucylcbiAgICAgICAgcmV0dXJuIF9pbnN0YW5jZS5oaWdobGlnaHRNYW55KHRoaXMsIHNlYXJjaGFibGUpXG4gICAgfVxufVxuXG5pZiAoIU5vZGUucHJvdG90eXBlLmhpZ2hsaWdodCkge1xuICAgIE5vZGUucHJvdG90eXBlLmhpZ2hsaWdodCA9IGZ1bmN0aW9uIChzZWFyY2hhYmxlLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3QgX2luc3RhbmNlID0gbmV3IEhpZ2hsaWdodChvcHRpb25zKVxuICAgICAgICB0aGlzLmlubmVySFRNTCA9IF9pbnN0YW5jZS5oaWdobGlnaHQodGhpcy5pbm5lclRleHQsIHNlYXJjaGFibGUpXG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxufVxuIiwiY29uc3QgSGlnaGxpZ2h0ZXIgPSByZXF1aXJlKCcuL3NyYycpXG5tb2R1bGUuZXhwb3J0cyA9IEhpZ2hsaWdodGVyXG4iLCJjbGFzcyBIaWdobGlnaHRlciB7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLmh0bWxfcGFyYW1zXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuaHRtbF90YWdcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy5jc3NfY2xhc3Nlc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLnJlZ2V4cFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLnJlZ2V4cF9mbGFnc1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLndvcmRfbWluX2xlbmd0aFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIaWdobGlnaHQgYSB3b3JkIG9yIGEgZ3JvdXAgb2Ygd29yZHMgaW4gYSBzdHJpbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZXh0XG4gICAgICogQHBhcmFtIHtTdHJpbmd8QXJyYXl9IHNlYXJjaGFibGVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfVxuICAgICAqL1xuICAgIGhpZ2hsaWdodChjb250ZXh0LCBzZWFyY2hhYmxlKSB7XG4gICAgICAgIGlmICghY29udGV4dCB8fCAhY29udGV4dC5sZW5ndGgpIHJldHVybiAnJ1xuICAgICAgICBpZiAoIXNlYXJjaGFibGUgfHwgIXNlYXJjaGFibGUubGVuZ3RoKSByZXR1cm4gY29udGV4dFxuICAgICAgICByZXR1cm4gdGhpcy5faGlnaGxpZ2h0KGNvbnRleHQsIHNlYXJjaGFibGUpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGlnaGxpZ2h0IGEgd29yZCBvciBhIGdyb3VwIG9mIHdvcmRzIGluIGFuIGFycmF5IG9mIHN0cmluZ1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmdbXX0gY29udGV4dEFycmF5XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaGFibGVcbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKi9cbiAgICBoaWdobGlnaHRNYW55KGNvbnRleHRBcnJheSwgc2VhcmNoYWJsZSkge1xuICAgICAgICBpZiAoIWNvbnRleHRBcnJheSB8fCAhQXJyYXkuaXNBcnJheShjb250ZXh0QXJyYXkpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIaWdobGlnaHQ6OmhpZ2hsaWdodE1hbnkgLSBjb250ZXh0QXJyYXkgcGFyYW1ldGVyIG11c3QgYmUgb2YgdHlwZSBhcnJheScpXG5cbiAgICAgICAgcmV0dXJuIGNvbnRleHRBcnJheS5yZWR1Y2UoKGFjYywgY29udGV4dCkgPT4ge1xuICAgICAgICAgICAgYWNjLnB1c2godGhpcy5oaWdobGlnaHQoY29udGV4dCwgc2VhcmNoYWJsZSkpXG4gICAgICAgICAgICByZXR1cm4gYWNjXG4gICAgICAgIH0sIFtdKVxuICAgIH1cblxuICAgIHNldE9wdGlvbnMob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMuX3BhcmFtcyA9IHtcbiAgICAgICAgICAgIGh0bWxfYXR0cnM6IHt9LFxuICAgICAgICAgICAgaHRtbF90YWc6ICdzcGFuJyxcbiAgICAgICAgICAgIGNzc19jbGFzc2VzOiAnc2VhcmNoX19oaWdobGlnaHQnLFxuICAgICAgICAgICAgcmVnZXhwOiAnX19leHBfXycsXG4gICAgICAgICAgICByZWdleHBfZmxhZ3M6ICdnaScsXG4gICAgICAgICAgICB3b3JkX21pbl9sZW5ndGg6IDIsXG4gICAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcHJlcGFyZShzZWFyY2hhYmxlKSB7XG4gICAgICAgIGNvbnN0IGluaXRpYWxfdmFsdWUgPSBzZWFyY2hhYmxlXG4gICAgICAgIHNlYXJjaGFibGUgPSBzZWFyY2hhYmxlLmNvbnN0cnVjdG9yID09PSBTdHJpbmcgPyBzZWFyY2hhYmxlLnNwbGl0KCcgJykgOiBzZWFyY2hhYmxlXG4gICAgICAgIHNlYXJjaGFibGUudW5zaGlmdChpbml0aWFsX3ZhbHVlKVxuICAgICAgICByZXR1cm4gc2VhcmNoYWJsZVxuICAgICAgICAgICAgLmZpbHRlcigodiwgaSwgcykgPT4gcy5pbmRleE9mKHYpID09PSBpKVxuICAgICAgICAgICAgLmZpbHRlcih2ID0+IHYubGVuZ3RoID4gdGhpcy5fcGFyYW1zLndvcmRfbWluX2xlbmd0aClcbiAgICAgICAgICAgIC5tYXAoaSA9PiBpLnRyaW0oKSlcbiAgICAgICAgICAgIC5qb2luKCd8JylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIaWdobGlnaHQgb25lIG9yIHNldmVyYWwgd29yZHMgaW4gYSBzdHJpbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZXh0XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaGFibGVcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2hpZ2hsaWdodChjb250ZXh0LCBzZWFyY2hhYmxlKSB7XG4gICAgICAgIHNlYXJjaGFibGUgPSB0aGlzLl9wcmVwYXJlKHNlYXJjaGFibGUpXG4gICAgICAgIGlmICghc2VhcmNoYWJsZS5sZW5ndGgpIHJldHVybiBjb250ZXh0XG4gICAgICAgIHJldHVybiBjb250ZXh0LnJlcGxhY2UoXG4gICAgICAgICAgICB0aGlzLl9idWlsZFJlZ0V4cChzZWFyY2hhYmxlKSwgXG4gICAgICAgICAgICBtYXRjaCA9PiB0aGlzLl9idWlsZFRlbXBsYXRlKG1hdGNoKVxuICAgICAgICApXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29udGV4dFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hhYmxlXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfYmVsb25nc1RvQ29udGV4dChzZWFyY2hhYmxlLCBjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiAobmV3IFJlZ0V4cChzZWFyY2hhYmxlLCAnZ2knKSkudGVzdChjb250ZXh0KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hhYmxlXG4gICAgICogQHJldHVybnMge1JlZ0V4cH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9idWlsZFJlZ0V4cChzZWFyY2hhYmxlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHRoaXMuX3BhcmFtcy5yZWdleHAucmVwbGFjZSgnX19leHBfXycsIHNlYXJjaGFibGUpLCB0aGlzLl9wYXJhbXMucmVnZXhwX2ZsYWdzKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB3b3JkXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9idWlsZFRlbXBsYXRlKHdvcmQpIHtcbiAgICAgICAgcmV0dXJuIGA8JHt0aGlzLl9wYXJhbXMuaHRtbF90YWd9IGNsYXNzPVwiJHt0aGlzLl9wYXJhbXMuY3NzX2NsYXNzZXN9XCIgJHt0aGlzLl9idWlsZEF0dHJzKCl9IGpzLWhpZ2hsaWdodHI+JHt3b3JkfTwvJHt0aGlzLl9wYXJhbXMuaHRtbF90YWd9PmBcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCdWlsZCBIVE1MIGF0dHJpYnV0ZXNcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfYnVpbGRBdHRycygpIHtcbiAgICAgICAgaWYgKCFPYmplY3Qua2V5cyh0aGlzLl9wYXJhbXMuaHRtbF9hdHRycykubGVuZ3RoKSByZXR1cm4gJyAnXG4gICAgICAgIGxldCBfYXR0cnMgPSBbJyddXG4gICAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5fcGFyYW1zLmh0bWxfYXR0cnMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9wYXJhbXMuaHRtbF9hdHRycy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgICAgICAgIF9hdHRycy5wdXNoKGAke2l9PVwiJHt0aGlzLl9wYXJhbXMuaHRtbF9hdHRyc1tpXX1cImApXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9hdHRycy5qb2luKCcgJylcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gSGlnaGxpZ2h0ZXJcbiJdLCJzb3VyY2VSb290IjoiIn0=